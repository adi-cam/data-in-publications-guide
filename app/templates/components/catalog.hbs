<ul class="sidebar" {{highlight linkSelector="li a" elementSelector="h2"}}>
  {{#each @topics as |topic|}}
    <li>
      <a href="#{{slug topic}}" {{link-inline}}>
        {{topic}}
      </a>
    </li>
  {{/each}}
</ul>

{{#each-in @recommendations as |topic recommendations|}}
  <div class="section">
    <div class="section__head">
      <h2 class="section__head__title" id={{slug topic}}>
        {{topic}}
      </h2>

      <div>
        <button class="section__head__button" type="button" {{on "click" (fn this.openAll recommendations)}}>
          Open All
        </button>

        <button class="section__head__button" type="button" {{on "click" (fn this.closeAll recommendations)}}>
          Close All
        </button>
      </div>
    </div>

    {{#each recommendations as |recommendation|}}
      <div class="section__group">
        {{#let (get this.state recommendation.id) as |open|}}
          <h3 role="button" class="section__group__title" {{on "click" (fn this.open recommendation.id (not open))}}>
            <span>{{recommendation.title}}</span>

            {{#if open}}
              <Icons::ChevronUp />
            {{else}}
              <Icons::ChevronDown />
            {{/if}}
          </h3>

          {{#if open}}
            <p>
              {{#if recommendation.advanced}}
                <strong>Basic</strong>:
              {{/if}}

              {{recommendation.basic}}
            </p>

            {{#if recommendation.advanced}}
              <p>
                <strong>Advanced</strong>:
                {{recommendation.advanced}}
              </p>
            {{/if}}

            {{#if recommendation.resources}}
              <h4 class="section__group__sub-title">
                Resources
              </h4>

              {{#each recommendation.resources as |resource|}}
                <p>
                  <a href={{resource.link}} rel="noopener noreferrer">
                    <Icons::External />
                    <strong>{{resource.title}}</strong>
                  </a><br />
                  {{resource.short}}
                </p>
              {{/each}}
            {{/if}}

            {{#if recommendation.contacts}}
              <h4 class="section__group__sub-title">
                Contacts
              </h4>

              {{#each recommendation.contacts as |contact|}}
                <p>
                  <a href="mailto:{{contact.link}}" rel="noopener noreferrer">
                    <Icons::External />
                    <strong>{{contact.title}}</strong>
                  </a><br />
                  {{contact.short}}
                </p>
              {{/each}}
            {{/if}}

            {{#if recommendation.examples}}
              <h4 class="section__group__sub-title">
                Examples
              </h4>

              {{#each recommendation.examples as |example|}}
                <p>
                  <a href={{example.link}} rel="noopener noreferrer">
                    <Icons::External />
                    <strong>{{example.title}}</strong>
                  </a><br />
                  {{example.short}}
                </p>
              {{/each}}
            {{/if}}
          {{/if}}
        {{/let}}
      </div>
    {{/each}}
  </div>
{{/each-in}}